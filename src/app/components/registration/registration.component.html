<app-banner image="assets/images/au1.jpg"></app-banner>
<div class="container" fxLayout="row" fxLayoutAlign="space-evenly center">
  <mat-tab-group
    dynamicHeight
    [selectedIndex]="selected.value"
    (selectedIndexChange)="selected.setValue($event)"
  >
    <mat-tab label="Авторизация">
      <div>
        <mat-card fxFlex="100%">
          <mat-card-title>
            <div class="label">Авторизация</div>
          </mat-card-title>

          <form [formGroup]="formGroup">
            <mat-form-field class="example-full-width">
              <input
                type="email"
                placeholder="Email"
                formControlName="email"
                matInput
                required
              />
            </mat-form-field>
            <mat-form-field class="example-full-width">
              <input
                type="password"
                placeholder="Пароль"
                matInput
                formControlName="password"
                required
              />
            </mat-form-field>
            <label class="success">{{ successMessage }}</label>
            <label class="error">{{ errorMessage }}</label>
            <!-- <p>{{ user.dateBirth }}</p> -->
            <div
              class="link"
              fxLayout="row"
              fxLayoutAlign="space-evenly center"
            >
              <a (click)="registration()">
                <strong>Регистрация</strong>
              </a>
              <a>Забыл пароль</a>
            </div>
            <button
              mat-raised-buttons
              color="primary"
              type="submit"
              (click)="tryAuth(formGroup.value)"
            >
              Войти
            </button>
            <button (click)="auth.signOut()">Выйти</button>
            <button (click)="CurrentUser()">
              check
            </button>
            <button (click)="auth.addItem('1', '2', 12312, 'daun')">
              check2
            </button>
          </form>

          <div fxLayout="row" fxLayoutAlign="space-evenly center">
            <div
              (click)="isClicked = !isClicked"
              [@bounce]="isClicked ? 'in' : 'on'"
            >
              <img
                class="logo-image"
                src="https://image.flaticon.com/icons/svg/145/145804.svg"
                (click)="auth.googleLogin()"
              />
            </div>
            <img
              class="logo-image"
              src="https://image.flaticon.com/icons/svg/179/179342.svg"
              (click)="auth.twitterLogin()"
            />

            <img
              class="logo-image"
              src="https://image.flaticon.com/icons/svg/179/179319.svg"
              (click)="auth.facebookLogin()"
            />
          </div>
        </mat-card>
      </div>
    </mat-tab>
    <mat-tab label="Регистрация">
      <div>
        <mat-card fxFlex="100%">
          <mat-card-title>
            <div class="label">Регистрация</div>
          </mat-card-title>
          <mat-vertical-stepper linear #stepper>
            <mat-step
              label="Данные"
              [stepControl]="formGroup"
              errorMessage="Data is required."
            >
              <!-- <form [formGroup]="formGroup">
                <mat-form-field class="example-full-width">
                  <input
                    matInput
                    placeholder="Логин"
                    formControlName="loginCtrl"
                    required
                  />
                </mat-form-field>
                <mat-form-field class="example-full-width">
                  <input
                    matInput
                    placeholder="Пароль"
                    formControlName="passCtrl"
                    required
                  />
                </mat-form-field>
              </form> -->
              <form [formGroup]="formGroup">
                <mat-form-field class="example-full-width">
                  <input
                    type="email"
                    placeholder="Email"
                    formControlName="email"
                    matInput
                    required
                  />
                </mat-form-field>
                <mat-form-field class="example-full-width">
                  <input
                    type="password"
                    placeholder="Пароль"
                    matInput
                    formControlName="password"
                    required
                  />
                </mat-form-field>
                <label class="error">{{ errorMessage }}</label>
                <label class="success">{{ successMessage }}</label>

                <button
                  type="submit"
                  (click)="tryRegister(formGroup.value)"
                  mat-button
                >
                  Регистрация
                </button>
                <button mat-button matStepperNext>
                  Вперёд
                </button>
              </form>
            </mat-step>
            <mat-step label="Персональные данные">
              <form [formGroup]="formGroup1">
                <mat-form-field class="example-full-width">
                  <input
                    matInput
                    placeholder="Имя"
                    formControlName="name"
                    matInput
                    [(ngModel)]="name"
                    required
                  />
                </mat-form-field>

                <mat-form-field class="example-full-width">
                  <input
                    matInput
                    [min]="minDate"
                    [max]="maxDate"
                    [matDatepicker]="picker"
                    placeholder="Дата вашего рождения"
                    formControlName="dateBirth"
                    [(ngModel)]="dateBirth"
                    name="dateBirth"
                    matInput
                    required
                    [formControl]="serializedDate"
                  />
                  <mat-datepicker-toggle
                    matSuffix
                    [for]="picker"
                  ></mat-datepicker-toggle>
                  <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>
                <div class="sex">
                  <mat-radio-group>
                    <h4>Ваш пол</h4>
                    <mat-radio-button
                      value="Мужчина"
                      (click)="setradio('Мужчина')"
                    >
                      <!-- (click)="setradio('Мужчина')"
                    ngModel
                    name="radio" -->
                      Мужчина
                    </mat-radio-button>
                    <mat-radio-button
                      value="Женщина"
                      (click)="setradio('Женщина')"
                    >
                      <!-- (click)="setradio('Женщина')"
                    ngModel
                    name="radio" -->
                      Женщина
                    </mat-radio-button>
                  </mat-radio-group>
                  <div *ngIf="isSelected('Мужчина')">
                    <input type="text" /> Мужчина radio button selected
                  </div>

                  <div *ngIf="isSelected('Женщина')">
                    <input type="text" /> Женщина radio button selected
                  </div>
                </div>

                <mat-form-field class="example-full-width">
                  <span matPrefix>+375 &nbsp;</span>
                  <input
                    type="tel"
                    matInput
                    placeholder="Телефон"
                    formControlName="phone"
                    [(ngModel)]="phone"
                    matInput
                    required
                  />
                  <mat-icon matSuffix>mode_edit</mat-icon>
                </mat-form-field>
                <button (click)="auth.addItem(dateBirth, phone, 'sex', name)">
                  check2
                </button>
                <div>
                  <button mat-button matStepperNext>Вперёд</button>
                  <button mat-button matStepperPrevious>Назад</button>
                </div>
                <!-- <button (click)="updateinfouser(formGroup1.value)">
                  check
                </button> -->
              </form>
            </mat-step>

            <mat-step label="Подтверждение">
              На ваш почтовый ящик было отправлено сообщение с подтверждением
              регистрации.
              <div>
                <button mat-button matStepperPrevious>Назад</button>
              </div>
            </mat-step>
          </mat-vertical-stepper>
          <!-- <form [formGroup]="formGroup">
            <mat-form-field class="example-full-width">
              <input
                type="email"
                placeholder="Email"
                formControlName="email"
                matInput
                required
              />
            </mat-form-field>
            <mat-form-field class="example-full-width">
              <input
                type="password"
                placeholder="Password"
                matInput
                formControlName="password"
                required
              />
            </mat-form-field>
            <label class="error">{{ errorMessage }}</label>
            <label class="success">{{ successMessage }}</label>

            <button
              type="submit"
              (click)="tryRegister(formGroup.value)"
              class="btn btn-default"
            >
              Register
            </button>
          </form> -->
        </mat-card>
      </div>
    </mat-tab>
    <!-- <mat-tab label="Авторизация Юридического лица">
        <div>
          <mat-card fxFlex="100%">
            <mat-card-title>
              <div class="label">Авторизация</div>
            </mat-card-title>
  
            <form [formGroup]="formGroup">
              <mat-form-field class="example-full-width">
                <input
                  type="email"
                  placeholder="Email Компании"
                  formControlName="email"
                  matInput
                  required
                />
              </mat-form-field>
              <mat-form-field class="example-full-width">
                <input
                  type="password"
                  placeholder="Пароль"
                  matInput
                  formControlName="password"
                  required
                />
              </mat-form-field>
              <label class="error">{{ errorMessage }}</label>
              <div
                class="link"
                fxLayout="row"
                fxLayoutAlign="space-evenly center"
              >
                <a (click)="registration()">
                  <strong>Регистрация</strong>
                </a>
                <a>Забыл пароль</a>
              </div>
              <button
                mat-raised-button
                color="primary"
                type="submit"
                (click)="tryAuth(formGroup.value)"
              >
                Войти
              </button>
            </form>
  
            <div fxLayout="row" fxLayoutAlign="space-evenly center">
              <div
                (click)="isClicked = !isClicked"
                [@bounce]="isClicked ? 'in' : 'on'"
              >
                <img
                  class="logo-image"
                  src="https://image.flaticon.com/icons/svg/145/145804.svg"
                  (click)="auth.googleLogin()"
                />
              </div>
              <img
                class="logo-image"
                src="https://image.flaticon.com/icons/svg/179/179342.svg"
                (click)="auth.twitterLogin()"
              />
              <img
                class="logo-image"
                src="https://image.flaticon.com/icons/svg/179/179319.svg"
                (click)="auth.facebookLogin()"
              />
            </div>
          </mat-card>
        </div>
      </mat-tab> -->
  </mat-tab-group>
</div>

<!-- <div *ngIf="(auth.user | async); then authenticated; else guest"></div>

<ng-template #guest>
  <h3>Привет, Гость</h3>
  <p>Авторизируйтесь чтобы начать</p>

  <button (click)="auth.googleLogin()">
    Войти через гугл
  </button>
</ng-template>

<ng-template #authenticated>
  <div *ngIf="(auth.user | async) as user">
    <h3>Привет, {{ user.displayName }}</h3>
    <img [src]="user.photoURL" style="width:2vh" />
    Теперь вы можете перейти в личный кабинет
    <button mat-button routerLink="/area">Личный кабинет</button>
    <button (click)="auth.signOut()">Выйти</button>
  </div>
</ng-template> -->
